"use strict";(self["webpackChunkwsd02"]=self["webpackChunkwsd02"]||[]).push([[0],{8362:function(e,r,a){a.d(r,{A:function(){return t}});a(4114),a(8992),a(2577),a(7550);var o=a(144),l=a(6768);const s=()=>{const e=e=>{if(!e)return{isValid:!1,error:"이메일을 입력해주세요."};const r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return r.test(e)?{isValid:!0}:{isValid:!1,error:"유효한 이메일 형식이 아닙니다."}},r=e=>e?e.length<20?{isValid:!1,error:"유효한 TMDB API 키를 입력해주세요."}:{isValid:!0}:{isValid:!1,error:"비밀번호를 입력해주세요."},a=(e,r)=>r?e!==r?{isValid:!1,error:"비밀번호가 일치하지 않습니다."}:{isValid:!0}:{isValid:!1,error:"비밀번호 확인을 입력해주세요."},o=e=>e?{isValid:!0}:{isValid:!1,error:"이용약관에 동의해주세요."},l=a=>{const o=e(a.email);if(!o.isValid)return o;const l=r(a.password);return l.isValid?{isValid:!0}:l},s=l=>{const s=e(l.email);if(!s.isValid)return s;const t=r(l.password);if(!t.isValid)return t;const n=a(l.password,l.confirmPassword);if(!n.isValid)return n;const u=o(l.agreement);return u.isValid?{isValid:!0}:u};return{validateEmail:e,validatePassword:r,validatePasswordConfirm:a,validateAgreement:o,validateLoginForm:l,validateRegisterForm:s}},t=()=>{const{validateLoginForm:e,validateRegisterForm:r}=s(),a=(0,o.KR)(null),t=(0,o.KR)(!1),n=(0,o.KR)(!1),u=(0,l.EW)((()=>null!==a.value&&null!==localStorage.getItem("TMDb-Key"))),c=async e=>{try{const r=await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${e}&language=ko-KR&page=1`);return r.ok}catch{return!1}},i=async r=>{try{const o=e(r);if(!o.isValid)return{success:!1,error:o.error};const l=JSON.parse(localStorage.getItem("users")||"[]"),s=l.find((e=>e.id===r.email&&e.password===r.password));if(!s)return{success:!1,error:"이메일 또는 비밀번호가 일치하지 않습니다."};const t=await c(r.password);return t?(localStorage.setItem("TMDb-Key",r.password),localStorage.setItem("currentUser",r.email),r.rememberMe&&localStorage.setItem("keepLoggedIn","true"),a.value=r.email,{success:!0}):{success:!1,error:"유효하지 않은 TMDB API 키입니다."}}catch(o){return console.error("Login error:",o),{success:!1,error:"로그인 중 오류가 발생했습니다."}}},d=async e=>{try{const a=r(e);if(!a.isValid)return{success:!1,error:a.error};const o=await c(e.password);if(!o)return{success:!1,error:"유효하지 않은 TMDB API 키입니다."};const l=JSON.parse(localStorage.getItem("users")||"[]");return l.some((r=>r.id===e.email))?{success:!1,error:"이미 등록된 이메일입니다."}:(l.push({id:e.email,password:e.password}),localStorage.setItem("users",JSON.stringify(l)),{success:!0})}catch(a){return console.error("Register error:",a),{success:!1,error:"회원가입 중 오류가 발생했습니다."}}},m=()=>{localStorage.removeItem("TMDb-Key"),localStorage.removeItem("currentUser"),localStorage.removeItem("keepLoggedIn"),a.value=null,n.value=!1},p=()=>{const e=localStorage.getItem("currentUser"),r=localStorage.getItem("keepLoggedIn");return!(!e||"true"!==r)&&(a.value=e,!0)},g=()=>{t.value=window.scrollY>50},v=()=>{n.value=!n.value},h=()=>{n.value=!1},b=[{name:"홈",path:"/"},{name:"대세 콘텐츠",path:"/popular"},{name:"찾아보기",path:"/search"},{name:"내가 찜한 콘텐츠",path:"/wishlist"}],V=()=>!!u.value;return{currentUser:a,isLoggedIn:u,login:i,register:d,logout:m,checkAuth:p,requireAuth:V,isScrolled:t,isMobileMenuOpen:n,handleScroll:g,toggleMobileMenu:v,closeMobileMenu:h,menuItems:b}}},3e3:function(e,r,a){a.r(r),a.d(r,{default:function(){return B}});a(4114);var o=a(6768),l=a(4232),s=a(144),t=a(1387),n=a(5130);const u={class:"form-group"},c=["value","type","placeholder"],i={key:0,class:"error-message"};var d=(0,o.pM)({__name:"FormInput",props:{modelValue:{},type:{},placeholder:{},error:{}},emits:["update:modelValue"],setup(e){return(e,r)=>((0,o.uX)(),(0,o.CE)("div",u,[(0,o.Lk)("input",{value:e.modelValue,type:e.type,placeholder:e.placeholder,class:(0,l.C4)(["form-input",{error:e.error}]),onInput:r[0]||(r[0]=r=>e.$emit("update:modelValue",r.target.value))},null,42,c),e.error?((0,o.uX)(),(0,o.CE)("span",i,(0,l.v_)(e.error),1)):(0,o.Q3)("",!0)]))}}),m=a(1241);const p=(0,m.A)(d,[["__scopeId","data-v-50c0e313"]]);var g=p;const v=["disabled"],h={key:0},b={key:1,class:"loading-spinner"};var V=(0,o.pM)({__name:"FormButton",props:{loading:{type:Boolean}},setup(e){return(e,r)=>((0,o.uX)(),(0,o.CE)("button",{class:(0,l.C4)(["form-button",{loading:e.loading}]),disabled:e.loading},[e.loading?((0,o.uX)(),(0,o.CE)("span",b)):((0,o.uX)(),(0,o.CE)("span",h,[(0,o.RG)(e.$slots,"default")]))],10,v))}});const k=(0,m.A)(V,[["__scopeId","data-v-3ea18e82"]]);var w=k;const f={class:"form-checkbox"},y={class:"checkbox-label"},I=["checked"],_={class:"label-text"};var L=(0,o.pM)({__name:"FormCheckbox",props:{modelValue:{type:Boolean},label:{}},emits:["update:modelValue"],setup(e){return(e,r)=>((0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("label",y,[(0,o.Lk)("input",{type:"checkbox",checked:e.modelValue,class:"checkbox-input",onChange:r[0]||(r[0]=r=>e.$emit("update:modelValue",r.target.checked))},null,40,I),(0,o.Lk)("span",_,(0,l.v_)(e.label),1)])]))}});const M=(0,m.A)(L,[["__scopeId","data-v-00bb90eb"]]);var S=M,A=a(8362),C=(0,o.pM)({__name:"LoginForm",emits:["toggle-auth","login-success"],setup(e,{emit:r}){const{login:a}=(0,A.A)(),l=r,t=(0,s.KR)(!1),u=(0,s.Kh)({email:"",password:"",rememberMe:!1}),c=(0,s.Kh)({email:"",password:""}),i=async()=>{try{t.value=!0,c.email="",c.password="";const e=await a(u);e.success?l("login-success"):e.error?.includes("이메일")?c.email=e.error:c.password=e.error}finally{t.value=!1}};return(e,r)=>((0,o.uX)(),(0,o.CE)("form",{class:"auth-form",onSubmit:(0,n.D$)(i,["prevent"])},[r[5]||(r[5]=(0,o.Lk)("h2",null,"로그인",-1)),(0,o.bF)(g,{modelValue:u.email,"onUpdate:modelValue":r[0]||(r[0]=e=>u.email=e),type:"email",placeholder:"이메일",error:c.email},null,8,["modelValue","error"]),(0,o.bF)(g,{modelValue:u.password,"onUpdate:modelValue":r[1]||(r[1]=e=>u.password=e),type:"password",placeholder:"비밀번호 (TMDB API Key)",error:c.password},null,8,["modelValue","error"]),(0,o.bF)(S,{modelValue:u.rememberMe,"onUpdate:modelValue":r[2]||(r[2]=e=>u.rememberMe=e),label:"로그인 상태 유지"},null,8,["modelValue"]),(0,o.bF)(w,{loading:t.value},{default:(0,o.k6)((()=>r[4]||(r[4]=[(0,o.eW)(" 로그인 ")]))),_:1},8,["loading"]),(0,o.Lk)("button",{type:"button",class:"toggle-button",onClick:r[3]||(r[3]=r=>e.$emit("toggle-auth"))}," 계정이 없으신가요? 회원가입 ")],32))}});const F=(0,m.A)(C,[["__scopeId","data-v-5e28b20f"]]);var K=F,P=(a(8992),a(3949),(0,o.pM)({__name:"RegisterForm",emits:["toggle-auth","register-success"],setup(e,{emit:r}){const{register:a}=(0,A.A)(),l=r,t=(0,s.KR)(!1),u=(0,s.Kh)({email:"",password:"",confirmPassword:"",agreement:!1}),c=(0,s.Kh)({email:"",password:"",confirmPassword:"",agreement:""}),i=async()=>{try{t.value=!0,Object.keys(c).forEach((e=>{c[e]=""}));const e=await a(u);e.success?l("register-success"):e.error?.includes("이메일")?c.email=e.error:e.error?.includes("비밀번호 확인")?c.confirmPassword=e.error:e.error?.includes("비밀번호")?c.password=e.error:e.error?.includes("약관")?c.agreement=e.error:c.password=e.error}finally{t.value=!1}};return(e,r)=>((0,o.uX)(),(0,o.CE)("form",{class:"auth-form",onSubmit:(0,n.D$)(i,["prevent"])},[r[6]||(r[6]=(0,o.Lk)("h2",null,"회원가입",-1)),(0,o.bF)(g,{modelValue:u.email,"onUpdate:modelValue":r[0]||(r[0]=e=>u.email=e),type:"email",placeholder:"이메일",error:c.email},null,8,["modelValue","error"]),(0,o.bF)(g,{modelValue:u.password,"onUpdate:modelValue":r[1]||(r[1]=e=>u.password=e),type:"password",placeholder:"비밀번호 (TMDB API Key)",error:c.password},null,8,["modelValue","error"]),(0,o.bF)(g,{modelValue:u.confirmPassword,"onUpdate:modelValue":r[2]||(r[2]=e=>u.confirmPassword=e),type:"password",placeholder:"비밀번호 확인",error:c.confirmPassword},null,8,["modelValue","error"]),(0,o.bF)(S,{modelValue:u.agreement,"onUpdate:modelValue":r[3]||(r[3]=e=>u.agreement=e),label:"이용약관에 동의합니다",error:c.agreement},null,8,["modelValue","error"]),(0,o.bF)(w,{loading:t.value},{default:(0,o.k6)((()=>r[5]||(r[5]=[(0,o.eW)(" 회원가입 ")]))),_:1},8,["loading"]),(0,o.Lk)("button",{type:"button",class:"toggle-button",onClick:r[4]||(r[4]=r=>e.$emit("toggle-auth"))}," 이미 계정이 있으신가요? 로그인 ")],32))}}));const E=(0,m.A)(P,[["__scopeId","data-v-d256de14"]]);var R=E;const U={class:"auth-container"},X={class:"card-front"},D={class:"card-back"};var T=(0,o.pM)({name:"SignIn",__name:"AuthPage",setup(e){const r=(0,t.rd)(),a=(0,s.KR)(!1),n=()=>{a.value=!a.value},u=()=>{r.push("/")},c=()=>{a.value=!1};return(e,r)=>((0,o.uX)(),(0,o.CE)("div",U,[(0,o.Lk)("div",{class:(0,l.C4)(["auth-card",{flipped:a.value}])},[(0,o.Lk)("div",X,[r[0]||(r[0]=(0,o.Lk)("div",{class:"logo-section"},[(0,o.Lk)("h1",null,"MOVIES"),(0,o.Lk)("p",null,"Welcome back to movies")],-1)),a.value?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(K,{key:0,onToggleAuth:n,onLoginSuccess:u}))]),(0,o.Lk)("div",D,[r[1]||(r[1]=(0,o.Lk)("div",{class:"logo-section"},[(0,o.Lk)("h1",null,"JOIN US"),(0,o.Lk)("p",null,"Create your account")],-1)),a.value?((0,o.uX)(),(0,o.Wv)(R,{key:0,onToggleAuth:n,onRegisterSuccess:c})):(0,o.Q3)("",!0)])],2)]))}});const $=(0,m.A)(T,[["__scopeId","data-v-7b4b206c"]]);var B=$}}]);
//# sourceMappingURL=0.1cce7b18.js.map