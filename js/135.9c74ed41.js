"use strict";(self["webpackChunkwsd02"]=self["webpackChunkwsd02"]||[]).push([[135],{9808:function(e,a,o){o.d(a,{A:function(){return m}});var l=o(6768),t=o(5130),n=o(4232);const s={class:"modal-content"},i={class:"poster-section"},v=["src","alt"],r={class:"info-section"},c={class:"movie-info"},u={class:"overview"};var d={__name:"MovieDetailModal",props:{movie:{type:Object,required:!0}},setup(e){const a=e,o=e=>void 0===e||null===e?"N/A":Number(e).toFixed(1);return(0,l.wB)((()=>a.movie),(e=>{console.log("모달 movie prop 변경됨:",e)})),(a,d)=>((0,l.uX)(),(0,l.CE)("div",{class:"modal-container",onClick:d[1]||(d[1]=(0,t.D$)((e=>a.$emit("close")),["self"]))},[(0,l.Lk)("div",s,[(0,l.Lk)("div",i,[(0,l.Lk)("img",{src:`https://image.tmdb.org/t/p/w500${e.movie.poster_path}`,alt:e.movie.title},null,8,v)]),(0,l.Lk)("div",r,[(0,l.Lk)("h2",null,(0,n.v_)(e.movie.title),1),(0,l.Lk)("div",c,[(0,l.Lk)("p",null,[d[2]||(d[2]=(0,l.Lk)("strong",null,"개봉일:",-1)),(0,l.eW)(" "+(0,n.v_)(e.movie.release_date),1)]),(0,l.Lk)("p",null,[d[3]||(d[3]=(0,l.Lk)("strong",null,"평점:",-1)),(0,l.eW)(" "+(0,n.v_)(o(e.movie.vote_average)),1)]),(0,l.Lk)("p",u,(0,n.v_)(e.movie.overview),1)])]),(0,l.Lk)("button",{class:"close-button",onClick:d[0]||(d[0]=e=>a.$emit("close"))},d[4]||(d[4]=[(0,l.Lk)("i",{class:"fas fa-times"},null,-1)]))])]))}},g=o(1241);const p=(0,g.A)(d,[["__scopeId","data-v-bd4d3ba4"]]);var m=p},5135:function(e,a,o){o.r(a),o.d(a,{default:function(){return L}});var l=o(6768),t=o(4232),n=o(144),s=o(9536),i=o(1586),v=o(8552),r=o(5623),c=o(4700),u=o(9808),d=o(8890),g=o(5932),p=o(8362);const m={class:"popular-movies-container"},h={class:"contents"};var w={__name:"PopularPage",setup(e){const{checkAuth:a}=(0,p.A)();a();const o=(0,n.KR)("table"),w=(0,n.KR)(null),k=(0,n.KR)([]),{movies:y,currentPage:L,totalPages:b,hasMore:f,fetchPopularMovies:_}=(0,d.$)(),A=(0,n.KR)(!1),C=(0,n.KR)("영화 정보를 불러오는 중..."),{updateWishlist:R}=(0,g.n)(),M=(0,n.KR)(!1),W=(0,n.KR)(0),F=(0,l.EW)((()=>Math.max(.8,1-W.value/400))),K=(0,l.EW)((()=>Math.min(.95,.7+W.value/400)));let $;const P=()=>{$&&window.cancelAnimationFrame($),$=window.requestAnimationFrame((()=>{W.value=window.scrollY,M.value=window.scrollY>30}))};(0,l.sV)((()=>{window.addEventListener("scroll",P,{passive:!0})})),(0,l.wB)(L,(async e=>{console.log("Page changed to:",e)}));const E=async e=>{try{A.value=!0,C.value="보기 방식 변경 중...",o.value=e,"table"===e?await _(1):(k.value=[],await X())}catch(a){console.error("Failed to change view type:",a)}finally{A.value=!1}},D=async e=>{if(console.log("Changing to page:",e),e!==L.value)try{A.value=!0,C.value=`${e}페이지로 이동 중...`,await _(e),window.scrollTo({top:0,behavior:"smooth"})}catch(a){console.error("Failed to change page:",a)}finally{A.value=!1}},X=async()=>{if(console.log("LoadMore triggered"),console.log("Current loading state:",A.value),console.log("Current hasMore state:",f.value),!A.value&&f.value)try{A.value=!0,C.value="추가 영화를 불러오는 중...",console.log("Loading started");const e=await _(L.value+1);console.log("API Response:",e),e?.results?(k.value=[...k.value,...e.results],L.value+=1,f.value=L.value<e.total_pages,console.log("Updated hasMore state:",f.value)):(f.value=!1,console.log("No more movies available"))}catch(e){console.error("Error loading more movies:",e)}finally{A.value=!1,console.log("Loading finished")}else console.log("Loading blocked - loading:",A.value,"hasMore:",f.value)},I=e=>{R(e)},T=async e=>{try{A.value=!0,C.value="영화 상세 정보를 불러오는 중...";const a=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=${localStorage.getItem("TMDb-Key")}&language=ko-KR`);w.value=await a.json()}catch(a){console.error("영화 상세 정보 로드 실패:",a)}finally{A.value=!1}};return(0,l.sV)((async()=>{try{A.value=!0,C.value="대세 콘텐츠를 불러오는 중...",await _(1)}catch(e){console.error("Failed to load initial movies:",e)}finally{A.value=!1}window.removeEventListener("scroll",P)})),(e,a)=>((0,l.uX)(),(0,l.CE)("div",m,[(0,l.bF)(s.A),(0,l.bF)(i.A,{loading:A.value,message:"영화 정보를 불러오는 중입니다."},null,8,["loading"]),(0,l.Lk)("div",{class:(0,t.C4)(["content-wrapper mt-16 px-4 py-6",{"opacity-50":A.value}])},[(0,l.Lk)("div",{class:(0,t.C4)(["view-toggle-header",{"header-scrolled":M.value}]),style:(0,t.Tr)({opacity:F.value,backgroundColor:`rgba(17, 17, 17, ${K.value})`})},[(0,l.Lk)("div",h,[(0,l.bF)(v.A,{"initial-view":o.value,onViewTypeChanged:E},null,8,["initial-view"])])],6),"table"===o.value?((0,l.uX)(),(0,l.Wv)(r.A,{key:0,movies:(0,n.R1)(y),"current-page":(0,n.R1)(L),"total-pages":(0,n.R1)(b),onPageChanged:D,onWishlistUpdated:I,onShowDetail:T},null,8,["movies","current-page","total-pages"])):((0,l.uX)(),(0,l.Wv)(c.A,{key:1,movies:k.value,loading:A.value,"has-more":(0,n.R1)(f),onLoadMore:X,onWishlistUpdated:I,onShowDetail:T},null,8,["movies","loading","has-more"]))],2),w.value?((0,l.uX)(),(0,l.Wv)(u.A,{key:0,movie:w.value,onClose:a[0]||(a[0]=e=>w.value=null),onWishlistUpdated:I},null,8,["movie"])):(0,l.Q3)("",!0)]))}},k=o(1241);const y=(0,k.A)(w,[["__scopeId","data-v-c6a079dc"]]);var L=y}}]);
//# sourceMappingURL=135.9c74ed41.js.map